--LEN: возвращает количество символов в строке.
--В качестве параметра в функцию передается строка, для которой надо найти длину:
--SELECT LEN('Apple')  -- 5

--LTRIM: удаляет начальные пробелы из строки. В качестве параметра принимает строку:
--SELECT LTRIM('  Apple')
--RTRIM: удаляет конечные пробелы из строки. В качестве параметра принимает строку:
--SELECT RTRIM(' Apple    ')

--CHARINDEX: возвращает индекс, по которому находится первое вхождение подстроки в строке.
--В качестве первого параметра передается подстрока, а в качестве второго - строка, в которой надо вести поиск:
--SELECT CHARINDEX('pl', 'Apple') -- 3

--PATINDEX: возвращает индекс, по которому находится первое вхождение определенного шаблона в строке:
--SELECT PATINDEX('%p_e%', 'Apple')   -- 

--LEFT: вырезает с начала строки определенное количество символов. 
--Первый параметр функции - строка, а второй - количество символов, которые надо вырезать сначала строки:
--SELECT LEFT('Apple', 3) -- App
--RIGHT: вырезает с конца строки определенное количество символов. 
--Первый параметр функции - строка, а второй - количество символов, которые надо вырезать сначала строки:
--SELECT RIGHT('Apple', 3)    -- ple

--SUBSTRING: вырезает из строки подстроку определенной длиной, начиная с определенного индекса. 
--Певый параметр функции - строка, второй - начальный индекс для вырезки,
--и третий параметр - количество вырезаемых символов:
--SELECT SUBSTRING('Galaxy S8 Plus', 8, 2)    -- S8

--REPLACE: заменяет одну подстроку другой в рамках строки.
--Первый параметр функции - строка, второй - подстрока, которую надо заменить, 
--а третий - подстрока, на которую надо заменить:
--SELECT REPLACE('Galaxy S8 Plus', 'S8 Plus', 'Note 8')   -- Galaxy Note 8

--REVERSE: переворачивает строку наоборот:
--SELECT REVERSE('123456789') -- 987654321

--CONCAT: объединяет две строки в одну. 
--В качестве параметра принимает от 2-х и более строк, которые надо соединить:
--SELECT CONCAT('Tom', ' ', 'Smith')  -- Tom Smith

--LOWER: переводит строку в нижний регистр:
--SELECT LOWER('Apple')   -- apple

--UPPER: переводит строку в верхний регистр
--SELECT UPPER('Apple')   -- APPLE

--SPACE: возвращает строку, которая содержит определенное количество пробелов

SELECT UPPER(LEFT(Manufacturer,2)) AS Abbreviation,
       CONCAT(ProductName, ' - ',  Manufacturer) AS FullProdName
FROM Products
ORDER BY Abbreviation


--Для работы с числовыми данными T-SQL предоставляет ряд функций:

--ROUND: округляет число. В качестве первого параметра передается число.
--Второй параметр указывает на длину.
--Если длина представляет положительное число, то оно указывает,
--до какой цифры после запятой идет округление.
--Если длина представляет отрицательное число, то оно указывает,
--до какой цифры с конца числа до запятой идет округление

--SELECT ROUND(1342.345, 2)   -- 1342.350
--SELECT ROUND(1342.345, -2)  -- 1300.000

--ISNUMERIC: определяет, является ли значение числом.
--В качестве параметра функция принимает выражение. Если выражение является числом, то функция возвращает 1. 
--Если не является, то возвращается 0.
--SELECT ISNUMERIC(1342.345)          -- 1
--SELECT ISNUMERIC('1342.345')        -- 1
--SELECT ISNUMERIC('SQL')         -- 0
--SELECT ISNUMERIC('13-04-2017')  -- 0

--ABS: возвращает абсолютное значение числа.
--SELECT ABS(-123)    -- 123

--CEILING: возвращает наименьшее целое число, которое больше или равно текущему значению.
--SELECT CEILING(-123.45)     -- -123
--SELECT CEILING(123.45)      -- 124

--FLOOR: возвращает наибольшее целое число, которое меньше или равно текущему значению.
--SELECT FLOOR(-123.45)       -- -124
--SELECT FLOOR(123.45)        -- 123

--SQUARE: возводит число в квадрат.
--SELECT SQUARE(5)        -- 25

--SQRT: получает квадратный корень числа.
--SELECT SQRT(225)        -- 15

--RAND: генерирует случайное число с плавающей точкой в диапазоне от 0 до 1.
--SELECT RAND()       -- 0.707365088352935
--SELECT RAND()       -- 0.173808327956812

--COS: возвращает косинус угла, выраженного в радианах
--SELECT COS(1.0472)  -- 0.5 - 60 градусов

--SIN: возвращает синус угла, выраженного в радианах
--SELECT SIN(1.5708)  -- 1 - 90 градусов

--TAN: возвращает тангенс угла, выраженного в радианах
--SELECT TAN(0.7854)  -- 1 - 45 градусов

SELECT ProductName, ROUND(Price * ProductCount, 2) AS All_Price
FROM Products

--GETDATE: возвращает текущую локальную дату и время на основе системных часов в виде объекта datetime
--SELECT GETDATE()    -- 2017-07-28 21:34:55.830

-- Функции работы с датами:
-- DAY, MONTH, YEAR: возвращают части даты
SELECT DAY(GETDATE()), MONTH(GETDATE()), YEAR(GETDATE()); -- Пример: 28, 11, 2024

-- DATENAME: часть даты в виде строки
SELECT DATENAME(month, GETDATE()); -- Пример: 'November'

-- DATEPART: часть даты в виде числа
SELECT DATEPART(month, GETDATE()); -- Пример: 11

-- DATEADD: добавление к дате
SELECT DATEADD(month, 2, '2024-11-26'); -- Пример: 2025-01-26
SELECT DATEADD(day, -5, '2024-11-26'); -- Пример: 2024-11-21

-- DATEDIFF: разница между датами
SELECT DATEDIFF(day, '2024-01-01', '2024-11-26'); -- Пример: 330

-- TODATETIMEOFFSET: добавление временного смещения
SELECT TODATETIMEOFFSET('2024-11-26 10:00:00', '+03:00');

-- SWITCHOFFSET: изменение смещения для datetimeoffset
SELECT SWITCHOFFSET(SYSDATETIMEOFFSET(), '+02:30');

-- EOMONTH: последний день месяца
SELECT EOMONTH('2024-11-26'); -- Пример: 2024-11-30
SELECT EOMONTH('2024-11-26', 3); -- Пример: 2025-02-28

-- DATEFROMPARTS: создание даты из частей
SELECT DATEFROMPARTS(2024, 11, 26); -- Пример: 2024-11-26

-- ISDATE: проверка корректности даты
SELECT ISDATE('2024-11-26'), ISDATE('26-11-2024'), ISDATE('SQL'); -- Пример: 1, 0, 0

--Преобразование данных:
--CAST преобразует один тип данных в другой

SELECT Id, CAST(CreatedAt AS nvarchar) + '; total: ' + CAST(Price * ProductCount AS nvarchar)  AS Col
FROM Orders

--CONVERT с 3 параметром ввиде стиля, а так тоже самое, что и CAST
SELECT CONVERT(nvarchar, CreatedAt, 3), 
       CONVERT(nvarchar, Price * ProductCount, 1) 
FROM Orders

--Доп функции
SELECT STR(123.4567, 6,2)   -- 123.46
SELECT CHAR(219)            --  Ы
SELECT ASCII('Ы')           -- 219
SELECT NCHAR(1067)          -- Ы
SELECT UNICODE('Ы')     -- 1067